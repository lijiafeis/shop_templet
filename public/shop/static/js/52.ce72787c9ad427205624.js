webpackJsonp([52],{"/Id2":function(t,s){},"IW+B":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o=e("Au9i"),a={data:function(){return{defaultAddress:null,goodsList:{},addressId:"",content:"",totalPrice:0,payInfo:{}}},methods:{payType:function(t){var s=this;if("0"===t)this.post("home/Pay/payForMoney",{id:this.payInfo.id,type:this.payInfo.type}).then(function(t){t.data.code,s.$router.push("/info"),Object(o.Toast)({message:t.data.info,duration:1e3})});else{var e=localStorage.getItem("token");location.href="http://flm.yunkzx.com/home/Shop/order_pay?token="+e+"&id="+this.payInfo.id+"&type="+this.payInfo.type}},getOrderList:function(t,s){var e=this;this.post("home/Shop/showShopInfo",{good_id:t,number:s}).then(function(t){1e4===t.data.code&&(e.defaultAddress=t.data.info.address,null!==e.defaultAddress&&(e.addressId=t.data.info.address.address_id,e.defaultAddress.city=JSON.parse(t.data.info.address.city)),e.goodsList=t.data.info.data,e.goodsList.pic_url=e.imageURL(t.data.info.data.pic_url),e.totalPrice=e.goodsList.good_price*e.goodsList.good_num)})},submitOrder:function(){var t=this;this.$refs.pop.value="",""!==this.addressId?(o.Indicator.open(),this.post("home/Order/createBuyOrder",{good_id:this.goodsList.id,good_num:this.goodsList.good_num,address_id:this.addressId,content:this.content}).then(function(s){1e4===s.data.code?(t.$refs.pop.popupVisible=!0,t.payInfo=s.data.info):Object(o.Toast)({message:s.data.info,duration:1e3}),o.Indicator.close()})):Object(o.Toast)({message:"请添加收货地址",duration:1e3})},back:function(){this.$router.go(-1)},selectAddress:function(){this.$router.push("/site")}},components:{pop:e("UQv7").a},mounted:function(){var t=this.$route.params.id,s=this.$route.params.num;this.getOrderList(t,s)}},i={render:function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",{staticClass:"setOrder"},[o("header",{staticClass:"count_top header"},[o("img",{attrs:{src:e("0+aQ"),alt:""},on:{click:t.back}}),t._v(" "),o("span",[t._v("确认订单")])]),t._v(" "),o("div",{on:{click:t.selectAddress}},[null===t.defaultAddress?o("section",{staticClass:"order_w"},[o("img",{attrs:{src:e("Nn4G"),alt:"",width:"50"}}),t._v(" "),o("span",[t._v("请添加收货地址")])]):o("section",{staticClass:"order_address_t"},[t._m(0),t._v(" "),o("div",[o("section",{staticClass:"address_title"},[o("p",[t._v("收件人: "+t._s(t.defaultAddress.username))]),t._v(" "),o("p",[t._v(t._s(t.defaultAddress.telphone))])]),t._v(" "),o("p",[t._v("\n          收货地址: "),t._l(t.defaultAddress.city,function(s){return o("span",[t._v(t._s(s.name))])}),t._v(t._s(t.defaultAddress.address)+"\n        ")],2)]),t._v(" "),t._m(1)])]),t._v(" "),o("ul",[o("li",{staticClass:"order_good",on:{click:t.back}},[o("section",[o("img",{attrs:{src:t.goodsList.pic_url,alt:""}})]),t._v(" "),o("section",[o("p",{staticClass:"good_name"},[t._v(t._s(t.goodsList.good_name))]),t._v(" "),o("div",{staticClass:"good_num"},[o("p",{staticClass:"good_price"},[t._v("¥ "+t._s(t.goodsList.good_price))]),t._v(" "),o("p",[t._v("x "+t._s(t.goodsList.good_num))])])])])]),t._v(" "),o("label",{staticClass:"site"},[o("span",[t._v("买家留言:")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{type:"text",placeholder:"选填,可填写和卖家达成一致的要求"},domProps:{value:t.content},on:{input:function(s){s.target.composing||(t.content=s.target.value)}}})]),t._v(" "),o("label",{staticClass:"goods_price"},[o("span",[t._v("运费:")]),t._v(" "),o("span",[t._v("¥"+t._s(t.goodsList.yunfei))])]),t._v(" "),o("section",{staticClass:"goods_price"},[o("span",[t._v("订单总价")]),t._v(" "),o("span",[t._v("¥"+t._s(t.totalPrice))])]),t._v(" "),o("section",{staticClass:"goods_price"},[o("span",[t._v("需付款")]),t._v(" "),o("span",{staticClass:"price_d"},[t._v("¥"+t._s(t.totalPrice))])]),t._v(" "),o("footer",{staticClass:"order_btn"},[o("section",{staticClass:"btn_l"},[o("span",[t._v("合计:")]),t._v(" "),o("span",[t._v("¥"+t._s(t.totalPrice+(t.goodsList.yunfei-0)))])]),t._v(" "),o("section",{staticClass:"btn_r",on:{click:t.submitOrder}},[t._v("\n      提交订单\n    ")])]),t._v(" "),o("pop",{ref:"pop",on:{show:t.payType}})],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",[s("img",{attrs:{src:e("Nn4G"),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",[s("img",{attrs:{src:e("Z++a"),alt:""}})])}]};var d=e("VU/8")(a,i,!1,function(t){e("/Id2")},"data-v-293f8086",null);s.default=d.exports}});
//# sourceMappingURL=52.ce72787c9ad427205624.js.map