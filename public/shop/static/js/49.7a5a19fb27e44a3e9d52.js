webpackJsonp([49],{"6EV3":function(t,s){},NJzV:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("mvHQ"),o=e.n(a),i=e("Au9i"),d={data:function(){return{defaultAddress:null,goodsList:{},addressId:"",content:"",totalPrice:0}},methods:{getOrderList:function(t,s){var e=this;this.post("home/Shop/showShopInfo",{good_id:t,number:s}).then(function(t){1e4===t.data.code&&(e.defaultAddress=t.data.info.address,null!==e.defaultAddress&&(e.addressId=t.data.info.address.address_id,e.defaultAddress.city=JSON.parse(t.data.info.address.city)),e.goodsList=t.data.info.data,e.goodsList.pic_url=e.imageURL(t.data.info.data.pic_url),e.totalPrice=e.goodsList.good_price*e.goodsList.good_num)})},submitOrder:function(){var t=[],s={};s.good_id=this.goodsList.id,s.number=this.goodsList.good_num,t.push(s),""!==this.addressId?(i.Indicator.open(),this.post("home/Order/createOrder",{list:o()(t),address_id:this.addressId,content:this.content,type:3}).then(function(t){if(i.Indicator.close(),1e4===t.data.code){var s=sessionStorage.getItem("token");location.href="http://flm.yunkzx.com/home/Shop/order_pay?token="+s+"&id="+t.data.info.id+"&type="+t.data.info.type}else Object(i.Toast)({message:t.data.info,duration:1e3});i.Indicator.close()})):Object(i.Toast)({message:"请添加收货地址",duration:1e3})},back:function(){this.$router.go(-1)},selectAddress:function(){this.$router.push("/site")}},mounted:function(){var t=this.$route.params.id,s=this.$route.params.num;this.getOrderList(t,s)}},n={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"setOrder"},[a("header",{staticClass:"count_top header"},[a("img",{attrs:{src:e("0+aQ"),alt:""},on:{click:t.back}}),t._v(" "),a("span",[t._v("确认订单")])]),t._v(" "),a("div",{on:{click:t.selectAddress}},[null===t.defaultAddress?a("section",{staticClass:"order_w"},[a("img",{attrs:{src:e("Nn4G"),alt:"",width:"50"}}),t._v(" "),a("span",[t._v("请添加收货地址")])]):a("section",{staticClass:"order_address_t"},[t._m(0),t._v(" "),a("div",[a("section",{staticClass:"address_title"},[a("p",[t._v("收件人: "+t._s(t.defaultAddress.username))]),t._v(" "),a("p",[t._v(t._s(t.defaultAddress.telphone))])]),t._v(" "),a("p",[t._v("\n          收货地址: "),t._l(t.defaultAddress.city,function(s){return a("span",[t._v(t._s(s.name))])}),t._v(t._s(t.defaultAddress.address)+"\n        ")],2)]),t._v(" "),t._m(1)])]),t._v(" "),a("ul",[a("li",{staticClass:"order_good",on:{click:t.back}},[a("section",[a("img",{attrs:{src:t.goodsList.pic_url,alt:""}})]),t._v(" "),a("section",[a("p",{staticClass:"good_name"},[t._v(t._s(t.goodsList.good_name))]),t._v(" "),a("div",{staticClass:"good_num"},[a("p",{staticClass:"good_price"},[t._v("¥ "+t._s(t.goodsList.good_price))]),t._v(" "),a("p",[t._v("x "+t._s(t.goodsList.good_num))])])])])]),t._v(" "),a("label",{staticClass:"site"},[a("span",[t._v("买家留言:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{type:"text",placeholder:"选填,可填写和卖家达成一致的要求"},domProps:{value:t.content},on:{input:function(s){s.target.composing||(t.content=s.target.value)}}})]),t._v(" "),a("section",{staticClass:"goods_price"},[a("span",[t._v("运费:")]),t._v(" "),a("span",[t._v("¥"+t._s(t.goodsList.yunfei))])]),t._v(" "),a("section",{staticClass:"goods_price"},[a("span",[t._v("订单总价")]),t._v(" "),a("span",[t._v("¥"+t._s(t.totalPrice))])]),t._v(" "),a("section",{staticClass:"goods_price"},[a("span",[t._v("需付款")]),t._v(" "),a("span",{staticClass:"price_d"},[t._v("¥"+t._s(t.totalPrice))])]),t._v(" "),a("footer",{staticClass:"order_btn"},[a("section",{staticClass:"btn_l"},[a("span",[t._v("合计:")]),t._v(" "),a("span",[t._v("¥"+t._s(t.totalPrice+(this.goodsList.yunfei-0)))])]),t._v(" "),a("section",{staticClass:"btn_r",on:{click:t.submitOrder}},[t._v("\n      提交订单\n    ")])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",[s("img",{attrs:{src:e("Nn4G"),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",[s("img",{attrs:{src:e("Z++a"),alt:""}})])}]};var r=e("VU/8")(d,n,!1,function(t){e("6EV3")},"data-v-4579c090",null);s.default=r.exports}});
//# sourceMappingURL=49.7a5a19fb27e44a3e9d52.js.map